<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">

    <title>RxJS Intro</title>

    <link href="css/reset.css" rel="stylesheet">
    <link href="css/reveal.css" rel="stylesheet">
    <link href="css/theme/findologic.css" rel="stylesheet">

    <!-- Theme used for syntax highlighting of code -->
    <link href="lib/css/monokai.css" rel="stylesheet">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>
<body>
<div class="reveal">
    <div class="footer-bar"></div>
    <div class="slides">
        <section>
            <section data-markdown>
            <textarea data-template>
                # RxJS Intro

                ![rxjs](https://rxjs-dev.firebaseapp.com/generated/images/marketing/home/Rx_Logo-512-512.png)
            </textarea>
            </section>

            <section data-markdown>
            <textarea data-template>
                # ME

                * [Georg M. Sorst](mailto:g.sorst@findologic.com)
                * [@piefke_schorsch](https://twitter.com/piefke_schorsch)
                * CTO @ ![FINDOLOGIC(https://findologic.com)](images/findologic.png)
                <!-- .element: style="vertical-align: middle; height: 50px;" -->
            </textarea>
            </section>
        </section>

        <section>
            <section data-markdown>
                <textarea data-template>
                    # ReactiveX?

                    > Reactive programming is an asynchronous programming paradigm concerned with data streams and the propagation of change
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # What?

                    Implementation of observer pattern
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # Observer pattern?

                    <span>Observable</span><!-- .element: class="fragment" width="250" data-fragment-index="1" -->
                    <span>&rarr; Subscription</span><!-- .element: class="fragment" width="250" data-fragment-index="3" -->
                    <span>&rarr; Observer</span><!-- .element: class="fragment" width="250" data-fragment-index="5" -->

                    <span><!-- .element: class="fragment" data-fragment-index="2" -->
                    ![youtuber](images/youtuber.jpg)<!-- .element: width="250" style="vertical-align: middle"; -->
                    </span>
                    <span><!-- .element: class="fragment" data-fragment-index="4" -->
                    &rarr;
                    ![subscribe](images/subscribe.png)<!-- .element: width="250" style="vertical-align: middle"; -->
                    </span>
                    <span><!-- .element: class="fragment" data-fragment-index="6" -->
                    &rarr;
                    ![audience](images/audience.jpg)<!-- .element: width="250" style="vertical-align: middle"; -->
                    </span>
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # Observer pattern

                    ```javascript
                    /* Observable   */ element
                    /* Subscription */   .addEventListener('click',
                    /* Observer     */     function() {…});
                    ```
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # Observable?

                    ![youtuber](images/youtuber.jpg)<!-- .element: width="250" style="vertical-align: middle"; -->

                    * Anything that emits values:
                        * Promises
                        * DOM events
                        * Timers
                        * Arrays
                        * …
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # Observables

                    Everything is a stream

                    ![stream](images/stream.jpg)<!-- .element: width="250" style="vertical-align: middle"; -->

                    Even if it just emits a single value

                    ![drop](images/drop.jpg)<!-- .element: width="250" style="vertical-align: middle"; -->
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # Subscription?

                    ![subscribe](images/subscribe.png)<!-- .element: width="250" style="vertical-align: middle"; -->

                    * Compose and transform streams
                    * Filter, map, zip, …
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # Observer?

                    ![audience](images/audience.jpg)<!-- .element: width="250" style="vertical-align: middle"; -->

                    * Actually does something
                    * Render, upload, store, …
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # RxJS

                    > RxJS (Reactive Extensions for JavaScript) is a library for reactive programming using observables that makes it easier to compose asynchronous or callback-based code
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # Code pls

                    ```javascript
                    rxjs.fromEvent(element, 'keypress').pipe(

                        map(event => event.target.value),

                        filter(value => value !== ''),

                    ).subscribe(value => console.log(value));
                    ```
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # Straight up pipe

                    ![branching](images/RxJS_no_branching.png)
                </textarea>
            </section>
        </section>

        <section>
            <section data-markdown>
                <textarea data-template>
                    # Why ReactiveX?
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # Functional

                    Operators are pure functions

                    &darr;

                    Clean, stateless code

                    ## `f(x) = y`
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # Asynchronous

                    Stateless functions are easy to run asynchronously

                    &darr;

                    Great concurrency

                    ![Sequential Concurrent](images/Sequential_Concurrent.png)
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # Versatile

                    Lots of common operators built in

                    &darr;

                    Less code
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # Support

                    * ReactiveX has implementations in all major languages
                        * Even ![php](images/php.svg)<!-- .element: style="vertical-align: middle; height: 50px;" -->
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # Usage

                    * Great for asynchronous event driven architectures
                        * ![nodejs](images/nodejs.svg)<!-- .element: style="vertical-align: middle; height: 50px;" -->
                        * ![angular](https://upload.wikimedia.org/wikipedia/commons/thumb/c/cf/Angular_full_color_logo.svg/768px-Angular_full_color_logo.svg.png)<!-- .element: style="vertical-align: middle; height: 50px;" -->
                        * Single page apps
                </textarea>
            </section>
        </section>

        <section>
            <section data-markdown>
                <textarea data-template>
                    # Operator overload

                    104 operators built in:

                    audit
                    auditTime
                    buffer
                    bufferCount
                    bufferTime
                    bufferToggle
                    bufferWhen
                    catchError
                    combineAll
                    combineLatest
                    concat
                    concatAll
                    concatMap
                    concatMapTo
                    count
                    debounce
                    debounceTime
                    defaultIfEmpty
                    delay
                    delayWhen
                    dematerialize
                    distinct
                    distinctUntilChanged
                    distinctUntilKeyChanged
                    elementAt
                    endWith
                    every
                    exhaust
                    exhaustMap
                    expand
                    filter
                    finalize
                    find
                    findIndex
                    first
                    flatMap
                    groupBy
                    ignoreElements
                    isEmpty
                    last
                    map
                    mapTo
                    materialize
                    max
                    merge
                    mergeAll
                    mergeMap
                    mergeMapTo
                    mergeScan
                    min
                    multicast
                    observeOn
                    onErrorResumeNext
                    pairwise
                    partition
                    pluck
                    publish
                    publishBehavior
                    publishLast
                    publishReplay
                    race
                    reduce
                    refCount
                    repeat
                    repeatWhen
                    retry
                    retryWhen
                    sample
                    sampleTime
                    scan
                    sequenceEqual
                    share
                    shareReplay
                    single
                    skip
                    skipLast
                    skipUntil
                    skipWhile
                    startWith
                    subscribeOn
                    switchAll
                    switchMap
                    switchMapTo
                    take
                    takeLast
                    takeUntil
                    takeWhile
                    tap
                    throttle
                    throttleTime
                    throwIfEmpty
                    timeInterval
                    timeout
                    timeoutWith
                    timestamp
                    toArray
                    window
                    windowCount
                    windowTime
                    windowToggle
                    windowWhen
                    withLatestFrom
                    zip
                    zipAll

                    <!-- .element: style="font-size: x-large;" -->

                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # Finding the right operator

                    Use [RxJS Operator Decision Tree](https://rxjs-dev.firebaseapp.com/operator-decision-tree) to find the right operator
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # RX Marbles

                    ![take](images/map-rxmarble.webp)
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # [take](https://rxmarbles.com/#take)<!-- .element: target="_blank" -->
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # [last](https://rxmarbles.com/#last)<!-- .element: target="_blank" -->
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # [filter](https://rxmarbles.com/#filter)<!-- .element: target="_blank" -->
                </textarea>
            </section>
        </section>


        <section>
            <section data-markdown>
                <textarea data-template>
                    # How?

                    Live demo time!

                    ![scared](images/scared.gif)
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # Live demo

                    Let's built a Wikipedia autocomplete!
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # Requirements

                    1. Listen to text input events
                    2. Get search field value
                    3. Filter out empty queries
                    4. Debounce rapid typing
                    5. Discard ongoing requests
                    6. Display spinner
                    7. Fetch suggestions
                    8. Hide spinner
                    9. Display results
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    ## Listen to text input events

                    Plain

                    <pre><code data-noescape data-trim>
                    element.addEventListener('input', (event) => {});
                    </code></pre>

                    RxJS

                    <pre><code data-noescape data-trim>
                    rxjs.fromEvent(element, 'input').subscribe();
                    </code></pre>
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    ## Get search field value

                    Plain

                    ```javascript
                    let query = event.target.value.trim();
                    ```

                    RxJS

                    ```javascript
                    rxjs.operators.map(event => event.target.value.trim()
                    ```
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    ## Filter out empty queries

                    Plain

                    ```javascript
                    if (query === '') {
                        return;
                    }
                    ```

                    RxJS

                    ```javascript
                    rxjs.operators.filter(query => query !== '')
                    ```
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    ## Debounce rapid typing

                    Plain

                    ```javascript
                    window.clearTimeout(debounceTimeout);
                    debounceTimeout = window.setTimeout(() {
                        /* Handle query */
                    }, 300);
                    ```

                    RxJS

                    ```javascript
                    rxjs.operators.debounce(() => rxjs.interval(300)),
                    /* Handle query */
                    ```
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    ## Discard ongoing requests

                    Plain

                    ```javascript
                    controller.abort();
                    let controller = new AbortController();
                    let signal = controller.signal;

                    fetch(baseUrl + query, {signal}).then(
                        /* Handle response */
                    );
                    ```

                    RxJS

                    ```javascript
                    rxjs.operators.switchMap(query => from(fetch(baseUrl + query)),
                    /* Handle response */
                    ```
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    ## Display spinner

                    Plain

                    ```javascript
                    spinner.style.display = 'block';
                    ```

                    RxJS

                    ```javascript
                    rxjs.operators.tap(() => spinner.style.display = 'block')
                    ```
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    ## Fetch suggestions

                    Plain

                    ```javascript
                    fetch(url)
                        .then(response => response.json())
                        .then(/* Handle response */)
                    );
                    ```

                    RxJS

                    ```javascript
                    rxjs.operators.switchMap(query => from(fetch(baseUrl + query)),
                    rxjs.operators.switchMap(response => from(response.json()),
                    /* Handle response */
                    ```
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    ## Display spinner

                    Plain

                    ```javascript
                    spinner.style.display = 'none';
                    ```

                    RxJS

                    ```javascript
                    rxjs.operators.tap(() => spinner.style.display = 'none')
                    ```
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    ## Display results

                    Plain

                    ```javascript
                    fetch(url)
                        .then(function (json) {
                            let titles = json[1];
                            let links = json[3];
                            render(container, titles, links);
                        });
                    ```

                    RxJS

                    ```javascript
                    rxjs.operators.switchMap(query => from(fetch(baseUrl + query))),
                    rxjs.operators.map(json => ({'titles': json[1], 'links': json[3]})),
                    rxjs.operators.tap(({titles, links}) => render(container, titles, links))
                    ```
                </textarea>
            </section>
        </section>

        <section>
            <section data-markdown>
                <textarea data-template>
                    # Gotchas
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # Subscribe!

                    * Observables without subscription do nothing
                    * Just like functions that are not called
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # Handle errors!

                    Streams will stop once they throw an error

                    ![complete_error](images/RxJS_complete_error.png)

                    Handle error-prone actions (eg. fetching URL) in sub-stream
                </textarea>
            </section>

            <section data-markdown>
                <textarea data-template>
                    # No branching!

                    * Pipes run in a straight line
                    * No conditionals / branching

                    ![branching](images/RxJS_branching.png)<!-- .element: height="350" style="filter: brightness(20%);" -->
                    ![branching](images/RxJS_no_branching.png)<!-- .element: height="350" -->
                </textarea>
            </section>
        </section>
    </div>
</div>

<script src="js/reveal.js"></script>

<script>
    // More info about config & dependencies:
    // - https://github.com/hakimel/reveal.js#configuration
    // - https://github.com/hakimel/reveal.js#dependencies
    Reveal.initialize({
        hash: true,
        dependencies: [
            {src: 'plugin/markdown/marked.js'},
            {src: 'plugin/markdown/markdown.js'},
            {src: 'plugin/notes/notes.js', async: true},
            {src: 'plugin/highlight/highlight.js', async: true},
            {src: 'plugin/reveal.js-menu-1.2.0/menu.js'}
        ]
    });
</script>
</body>
</html>
